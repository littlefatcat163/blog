<!DOCTYPE html><html lang="en" data-default-color-scheme="dark"><head><link rel="stylesheet" href="/blog/css/custom.css"><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/blog/img/docs.png"><link rel="icon" href="/blog/img/docs.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#000"><meta name="author" content="littlefatcat"><meta name="keywords" content=""><meta name="description" content="js引擎在正式执行之前，先进行一次预编译，在这个过程中，首先将变量声明和函数声明提升到当前作用域的顶端，然后再顺序执行接下来的处理"><meta property="og:type" content="article"><meta property="og:title" content="javascript变量提升"><meta property="og:url" content="https://littlefatcat163.github.io/blog/2023/05/06/js/var-lift/index.html"><meta property="og:site_name" content="Blog"><meta property="og:description" content="js引擎在正式执行之前，先进行一次预编译，在这个过程中，首先将变量声明和函数声明提升到当前作用域的顶端，然后再顺序执行接下来的处理"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://littlefatcat163.github.io/blog/img/js.webp"><meta property="article:published_time" content="2023-05-06T13:49:18.000Z"><meta property="article:modified_time" content="2024-03-16T03:27:44.149Z"><meta property="article:author" content="littlefatcat"><meta property="article:tag" content="javascript"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://littlefatcat163.github.io/blog/img/js.webp"><meta name="description" content="js引擎在正式执行之前，先进行一次预编译，在这个过程中，首先将变量声明和函数声明提升到当前作用域的顶端，然后再顺序执行接下来的处理"><meta name="referrer" content="no-referrer-when-downgrade"><meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><title>javascript变量提升 - Blog</title><link rel="stylesheet" href="//cdn.staticfile.net/bootstrap/5.3.2/css/bootstrap.min.css"><link rel="stylesheet" href="/blog/css/main.css"><link id="highlight-css" rel="stylesheet" href="//lib.baomitu.com/highlight.js/11.9.0/styles/qtcreator-light.min.css"><link id="highlight-css-dark" rel="stylesheet" href="//lib.baomitu.com/highlight.js/11.9.0/styles/qtcreator-dark.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><script id="lnote-configs">var LNote=window.LNote||{version:"1.2.8",root:"/blog/"}</script><script src="/blog/js/utils.js"></script><script src="/blog/js/color-schema.js"></script><meta name="generator" content="Hexo 7.1.1"></head><body><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none;overflow:hidden;width:0;height:0"><defs><symbol id="success" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></symbol><symbol id="info" viewBox="0 0 16 16" fill="currentColor"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></symbol><symbol id="warning" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></symbol><symbol id="danger" viewBox="0 0 16 16" fill="currentColor"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></symbol><symbol id="tap-link" viewBox="0 0 16 16" fill="currentColor"><path d="M11.53,7.28h2.72a1.75,1.75,0,0,0,0-3.5H8.91l-.24-1.2A1.49,1.49,0,0,0,7,1.39l-3.1.34a2.34,2.34,0,0,0-1.11.41L.67,3.57A1.5,1.5,0,0,0,0,4.82V11.2a1.48,1.48,0,0,0,.76,1.3L3.2,13.9a3.54,3.54,0,0,0,1.39.44l2.71.27a2,2,0,0,0,2.19-1.79,1.27,1.27,0,0,0,0-.2V12l.25-.19a2.36,2.36,0,0,0,.71-.88,2.63,2.63,0,0,0,.11-1.16V9.68a1.3,1.3,0,0,0,.64-.56,2.78,2.78,0,0,0,.29-.74,5.28,5.28,0,0,0,0-1.05Z" transform="translate(0 -1.38)"/></symbol><symbol id="plus-circle-fill" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/></symbol><symbol id="dash-circle-fill" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/></symbol><symbol id="x" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></symbol><symbol id="check" viewBox="0 0 16 16" fill="currentColor"><path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/></symbol><symbol id="clipboard" viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></symbol><symbol id="question-circle-fill" viewBox="0 0 16 16" fill="currentColor"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"/></symbol><symbol id="chevron-left" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/></symbol><symbol id="chevron-right" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></symbol><symbol id="chat-left-dots" viewBox="0 0 16 16" fill="currentColor"><path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></symbol></defs></svg><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/blog/"><strong>Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent" style="flex-grow:0"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/blog/"><i class="iconfont icon-home-fill"></i> <span>Home</span></a></li><li class="nav-item"><a class="nav-link" href="/blog/archives"><i class="iconfont icon-archive-fill"></i> <span>Archives</span></a></li><li class="nav-item"><a class="nav-link" href="/blog/categories"><i class="iconfont icon-category-fill"></i> <span>Categories</span></a></li><li class="nav-item"><a class="nav-link" href="/blog/tags"><i class="iconfont icon-tags-fill"></i> <span>Tags</span></a></li><li class="nav-item"><a class="nav-link" href="/blog/about"><i class="iconfont icon-user-fill"></i> <span>About</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-bs-toggle="modal" data-bs-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/blog/img/js.webp) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="fs-1"><span id="subtitle" data-typed-text="javascript变量提升"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-05-06 21:49" pubdate>Saturday, May 6, 2023 9:49 PM</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 5.7k words </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 48 mins</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><p class="alert alert-info">Last updated on Saturday, March 16, 2024 11:27 AM</p><div class="markdown-body"><p>js引擎在正式执行之前，先进行一次预编译。在这个过程中，首先将变量声明和函数声明提升到当前作用域的顶端，然后再顺序执行接下来的处理。 注意：当前流行的js引擎大都对源码进行了编译，由于引擎不同，编译方式有所差异，预编译和提升的说法只是抽象出来，便于理解。</p><h2 id="1-变量提升"><a href="#1-变量提升" class="headerlink" title="1. 变量提升"></a>1. 变量提升</h2><h3 id="1-1-函数中if声明变量"><a href="#1-1-函数中if声明变量" class="headerlink" title="1.1 函数中if声明变量"></a>1.1 函数中if声明变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!foo) &#123;<br>        <span class="hljs-keyword">var</span> foo = <span class="hljs-number">5</span>;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 5</span><br>&#125;<br><br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo; <span class="hljs-comment">// 变量foo被提升到了作用域（函数）顶部， foo = undefined</span><br>    <span class="hljs-keyword">if</span> (!foo) &#123; <span class="hljs-comment">// !undefined = true</span><br>        foo = <span class="hljs-number">5</span>;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 5</span><br>&#125;<br><br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><h3 id="1-2-全局变量与函数局部变量"><a href="#1-2-全局变量与函数局部变量" class="headerlink" title="1.2 全局变量与函数局部变量"></a>1.2 全局变量与函数局部变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo = foo || <span class="hljs-number">5</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">//5</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo; <span class="hljs-comment">// 变量foo被提升到函数顶部，函数内已经有foo变量，所以不用去调用到全局变量foo，这里的foo = undefined</span><br>    foo = foo || <span class="hljs-number">5</span>; <span class="hljs-comment">// 条件成立， foo = 5</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">//5</span><br>&#125;<br><span class="hljs-title function_">tets</span>();<br></code></pre></td></tr></table></figure><h3 id="1-3-局部作用域声明了多个同名变量"><a href="#1-3-局部作用域声明了多个同名变量" class="headerlink" title="1.3 局部作用域声明了多个同名变量"></a>1.3 局部作用域声明了多个同名变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br>    &#123;<br>        <span class="hljs-keyword">var</span> foo = <span class="hljs-number">5</span>;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">//5</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo;<span class="hljs-comment">// 同一个标识符会被提升到作用域顶部，其他按顺序执行</span><br>    foo = <span class="hljs-number">3</span>;<br>    &#123;<br>        foo = <span class="hljs-number">5</span>;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo);<span class="hljs-comment">//5</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><h2 id="2-函数提升"><a href="#2-函数提升" class="headerlink" title="2. 函数提升"></a>2. 函数提升</h2><p>函数是一等公民（函数优先权最高），函数声明永远被提升到当前作用域顶部，然后才是函数表达式和变量按顺序执行。</p><h3 id="2-1-在函数声明之前调用函数"><a href="#2-1-在函数声明之前调用函数" class="headerlink" title="2.1 在函数声明之前调用函数"></a>2.1 在函数声明之前调用函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">foo</span>();<span class="hljs-comment">// foo...</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo...&#x27;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 函数声明提升到当前作用域顶部</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo...);</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">    foo();</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">test();</span><br></code></pre></td></tr></table></figure><h3 id="2-2-同一个作用域存在多个同名函数声明"><a href="#2-2-同一个作用域存在多个同名函数声明" class="headerlink" title="2.2 同一个作用域存在多个同名函数声明"></a>2.2 同一个作用域存在多个同名函数声明</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-title function_">foo</span>();<span class="hljs-comment">// 2</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>    &#125;<br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>    &#125;<br>    <span class="hljs-title function_">foo</span>();<span class="hljs-comment">// 2，后面出现的将会覆盖前面的函数声明</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><h2 id="3-函数表达式"><a href="#3-函数表达式" class="headerlink" title="3. 函数表达式"></a>3. 函数表达式</h2><ul><li>函数声明 <code>function foo() &#123;&#125;</code></li><li>匿名函数表达式 <code>var foo = function() &#123;&#125;</code></li><li>具名函数表达式 <code>var foo = function bar() &#123;console.log(bar)&#125;</code>, <strong>注意 <code>bar</code>函数名只能在函数内部使用，此时的<code>bar</code>是只读的</strong></li></ul><h3 id="3-1-函数声明-函数表达式"><a href="#3-1-函数声明-函数表达式" class="headerlink" title="3.1 函数声明+函数表达式"></a>3.1 函数声明+函数表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 2</span><br>    <span class="hljs-keyword">var</span> foo = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>    &#125;;<br>    <br>    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 1</span><br>    <br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>    &#125;;<br>    <br>    <span class="hljs-title function_">foo</span>();<span class="hljs-comment">// 1</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> foo;<br>    <span class="hljs-comment">// 函数声明是一等公民，函数声明的优先级最高，会被提升到当前作用域最顶端</span><br>    <span class="hljs-comment">// 由于foo变量是undefined，与函数名foo相同，所以foo会赋予函数foo</span><br>    foo = <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);<br>    &#125;;<br>    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 2</span><br>    foo = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>    &#125;;<br>    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 1</span><br>    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 1</span><br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><h3 id="3-2-函数与变量名重名"><a href="#3-2-函数与变量名重名" class="headerlink" title="3.2 函数与变量名重名"></a>3.2 函数与变量名重名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// f foo() &#123;&#125;</span><br>    foo = <span class="hljs-number">5</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 5</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-title function_">test</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 函数声明被提升到作用域顶端，全局的变量foo变没有被覆盖</span><br>    <span class="hljs-keyword">var</span> foo;<br>    foo = <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;&#125;;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// f foo() &#123;&#125;</span><br>    foo = <span class="hljs-number">5</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 5</span><br>&#125;;<br><br><span class="hljs-title function_">test</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo);<br></code></pre></td></tr></table></figure><h2 id="4-为什么要进行提升"><a href="#4-为什么要进行提升" class="headerlink" title="4. 为什么要进行提升"></a>4. 为什么要进行提升</h2><p>这个问题并没有明确的答案，函数提升是为了解决函数分别在自己的函数体内调用了另一个函数。</p><h3 id="4-1-函数相互调用（递归）"><a href="#4-1-函数相互调用（递归）" class="headerlink" title="4.1 函数相互调用（递归）"></a>4.1 函数相互调用（递归）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 源代码</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isEven</span>(<span class="hljs-params">n</span>) &#123;<br>    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">isOdd</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// 如果没有函数提升，当isEven函数被调用时，isOdd函数还没声明，isEvent将无法调用isOdd</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isEven</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// true</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isOdd</span>(<span class="hljs-params">n</span>) &#123;<br>    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">isEven</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 原编译后</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isEven</span>(<span class="hljs-params">n</span>) &#123;<br>    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">isOdd</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isOdd</span>(<span class="hljs-params">n</span>) &#123;<br>    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">isEven</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-comment">// 当开始调用函数的时候，确保了所有函数都已经是声明完毕</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isEven</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><h2 id="5-块级作用域"><a href="#5-块级作用域" class="headerlink" title="5. 块级作用域"></a>5. 块级作用域</h2><h3 id="5-1-js没有块级作用域"><a href="#5-1-js没有块级作用域" class="headerlink" title="5.1 js没有块级作用域"></a>5.1 js没有块级作用域</h3><p>JavaScript是没有块级作用域的，如果在块内使用var声明一个变量，在代码块外面仍旧是可见的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">var</span> foo = <span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// 3</span><br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++) &#123;<br>    <span class="hljs-keyword">var</span> j = i;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i); <span class="hljs-comment">// 9</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(j);; <span class="hljs-comment">// 8</span><br></code></pre></td></tr></table></figure><h3 id="5-2-let块级作用域"><a href="#5-2-let块级作用域" class="headerlink" title="5.2 let块级作用域"></a>5.2 let块级作用域</h3><p>块内声明的变量，块外是不可见的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">let</span> foo = <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// Uncaught ReferenceError: foo is not defined</span><br></code></pre></td></tr></table></figure><div class="note alert alert-warning"><div><p>ES6的let规范了变量的声明，约束了变量提升，必须先声明，才能使用。</p></div></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo); <span class="hljs-comment">// Uncaught ReferenceError: foo is not defined</span><br>    <span class="hljs-keyword">let</span> foo = <span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-title function_">test</span>();<br></code></pre></td></tr></table></figure><div class="note alert alert-danger"><div><p>注： 不管是<code>var</code>，还是<code>let</code>，预编译过程中，都发生了变量提升，与<strong>var</strong>不同的是，ES6对<code>let</code>进行了约束，<strong>在真正的词法变量声明之前，以任何方式访问let变量都是不允许的</strong>。</p></div></div><h3 id="5-3-let特性"><a href="#5-3-let特性" class="headerlink" title="5.3 let特性"></a>5.3 let特性</h3><ul><li><strong>暂时性死区</strong>，只要快内存在let命令，那么这个变量就绑定了当前的块作用域，不再受外部变量影响</li><li><strong>禁止重复声明变量</strong>，<code>let</code>不允许再相同作用域内重复声明同一个变量</li><li><strong>不会成为全局对象的属性</strong>，在全局作用域下用<code>var</code>声明一个变量，该变量会成为全局对象的属性（<code>window</code>、<code>global</code>），但是<code>let</code>是独立存在的变量，不会成为全局对象的属性</li></ul><h3 id="5-4-const"><a href="#5-4-const" class="headerlink" title="5.4 const"></a>5.4 const</h3><p><code>const</code> 和 <code>let</code> 相同，唯一不同的是 <strong>const声明的变量不能重新赋值，且声明的时候必须初始化</strong></p><h3 id="5-5-let-const-var对比"><a href="#5-5-let-const-var对比" class="headerlink" title="5.5 let&#x2F;const&#x2F;var对比"></a>5.5 let&#x2F;const&#x2F;var对比</h3><p>实际上，<code>let/const</code> 和 <code>var</code> 在“<strong>声明创建一个变量</strong>”没什么不同，只是Javascript拒绝访问还没有绑定值的<code>let/const</code>标识符</p><h2 id="6-声明"><a href="#6-声明" class="headerlink" title="6. 声明"></a>6. 声明</h2><p>6条声明语句中，只有变量和常量两种标识符</p><ul><li><code>let</code> 声明变量，不可再赋值前读取</li><li><code>const</code> 声明常量，不可写</li><li><code>var</code> 声明变量，在赋值前可读取到 <code>undefined</code></li><li><code>function</code> 声明变量，该变量指向一个函数</li><li><code>class</code> 声明变量，该变量指向一个类（类德作用域内部是处理严格模式的）</li><li><code>import</code> 导入标识符并作为常量</li></ul><h3 id="6-1-潜在声明"><a href="#6-1-潜在声明" class="headerlink" title="6.1 潜在声明"></a>6.1 潜在声明</h3><ul><li><code>for (var|let|const)&#123;&#125;</code> 声明一个或多个标识符，作为循环变量</li><li><code>try&#123;&#125;catch(err)&#123;&#125;</code> catch声明一个或多个标识符，作为异常对象变量</li></ul><h3 id="6-2-三种变量声明"><a href="#6-2-三种变量声明" class="headerlink" title="6.2 三种变量声明"></a>6.2 三种变量声明</h3><p><strong>函数、类</strong>的名字是按照<code>var</code>来处理的，<code>import</code>导入的名字是按照<code>const</code>来处理，所以声明本质上只有 <code>var</code>、<code>let</code>、<code>const</code>三种</p><h3 id="6-3-lRef-rVal"><a href="#6-3-lRef-rVal" class="headerlink" title="6.3 lRef &#x3D; rVal"></a>6.3 lRef &#x3D; rVal</h3><p><code>var a = 1</code> <strong>右</strong>操作数（的<strong>值</strong>）赋给<strong>左</strong>操作数（的<strong>引用</strong>），赋值表达式的左右边都是表达式</p><h3 id="6-4-变量泄露"><a href="#6-4-变量泄露" class="headerlink" title="6.4 变量泄露"></a>6.4 变量泄露</h3><p>向一个不存在的变量赋值，js会在创建一个全局变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">a 和 x 都是<span class="hljs-variable language_">global</span>属性<br><span class="hljs-keyword">var</span> a = <span class="hljs-number">100</span>;<br>x = <span class="hljs-number">200</span>;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(<span class="hljs-variable language_">global</span>, <span class="hljs-string">&#x27;a&#x27;</span>);<br>&#123;<span class="hljs-attr">value</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">wirtable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>&#125;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(<span class="hljs-variable language_">global</span>, <span class="hljs-string">&#x27;x&#x27;</span>);<br>&#123;<span class="hljs-attr">value</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">wirtable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>&#125;<br><br><span class="hljs-comment">// a不能删除，b可以被删除</span><br><span class="hljs-keyword">delete</span> a; <span class="hljs-comment">// false</span><br><span class="hljs-keyword">delete</span> x; <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><h3 id="var-x-y-100"><a href="#var-x-y-100" class="headerlink" title="var x &#x3D; y &#x3D; 100"></a>var x &#x3D; y &#x3D; 100</h3><p>右边是 <code>y = 100</code>，向不存在的变量y赋值了100</p><h2 id="7-练习题"><a href="#7-练习题" class="headerlink" title="7. 练习题"></a>7. 练习题</h2><h3 id="7-1"><a href="#7-1" class="headerlink" title="7.1"></a>7.1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 源代码</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> test);<br><span class="hljs-keyword">var</span> flag = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">if</span> (!flag) &#123;<br>    <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (flag) &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">a</span>) &#123;<br>        test = a;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test1&#x27;</span>);<br>    &#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">a</span>) &#123;<br>        test = a;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test2&#x27;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">var</span> flag;<br><span class="hljs-keyword">var</span> a;<br><span class="hljs-keyword">var</span> test;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefined</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> test); <span class="hljs-comment">// undefined</span><br>flag = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">if</span> (!flag) &#123;<br>    a = <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (flag) &#123;<br>    test = <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">a</span>) &#123;<br>        test = a;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test1&#x27;</span>);<br>    &#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    test = <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">a</span>) &#123;<br>        test = a;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test2&#x27;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-2"><a href="#7-2" class="headerlink" title="7.2"></a>7.2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 源代码</span><br><span class="hljs-title function_">alert</span>(a);<br><span class="hljs-title function_">a</span>();<br><span class="hljs-keyword">var</span> a = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alter</span>(<span class="hljs-number">10</span>);<br>&#125;<br><span class="hljs-title function_">alert</span>(a);<br>a = <span class="hljs-number">6</span>;<br><span class="hljs-title function_">a</span>();<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 预编译后</span><br><span class="hljs-keyword">var</span> a;<br>a = <span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alter</span>(<span class="hljs-number">10</span>);<br>&#125;<br><span class="hljs-title function_">alert</span>(a); <span class="hljs-comment">// alert &quot;function a() &#123; alert(10); &#125;&quot;</span><br><span class="hljs-title function_">a</span>(); <span class="hljs-comment">// 10</span><br>a = <span class="hljs-number">3</span>;<br><span class="hljs-title function_">alert</span>(a); <span class="hljs-comment">// 3</span><br>a = <span class="hljs-number">6</span>;<br><span class="hljs-title function_">a</span>(); <span class="hljs-comment">// error, a = 6, a is not a function</span><br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/blog/categories/front-end/" class="category-chain-item">front-end</a> </span><span class="category-chain"><a href="/blog/categories/back-end/" class="category-chain-item">back-end</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/blog/tags/javascript/" class="print-no-link">#javascript</a></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/blog/2023/05/07/js/this/" title="this"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">this</span> <span class="visible-mobile">Previous</span></a></article><article class="post-next col-6"><a href="/blog/2023/05/06/nodejs/npm/" title="npm"><span class="hidden-mobile">npm</span> <span class="visible-mobile">Next</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>Table of Contents</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="modalSearchLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Search</h4><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="modalSearchInput" class="form-control validate"> <label data-error="x" data-success="v" for="modalSearchInput">Keyword</label></div><div class="list-group" id="modalSearchResult"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="/blog/about" rel="nofollow noopener">blog <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/></svg> 1.3.2</a></div></div></footer><link rel="stylesheet" href="//cdn.staticfile.net/nprogress/0.2.0/nprogress.min.css"><script src="//cdn.staticfile.net/nprogress/0.2.0/nprogress.min.js"></script><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="//cdn.staticfile.net/typed.js/2.1.0/typed.umd.min.js"></script><script src="//cdn.staticfile.net/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script><script src="/blog/js/local-search.js"></script><script src="/blog/js/events.js"></script><script>!function(t){var e=document.getElementById("subtitle");e&&"Typed"in t&&(e.innerText="",e=e.getAttribute("data-typed-text"),new t.Typed("#subtitle",{strings:["  ",e],cursorChar:"_",typeSpeed:80,loop:!1}))}(window)</script><script src="//cdn.staticfile.net/tocbot/4.25.0/tocbot.min.js"></script><script src="/blog/js/post/toc.js"></script><script src="//cdn.staticfile.net/clipboard.js/2.0.11/clipboard.min.js"></script><script src="/blog/js/post/copying-code.js"></script><link rel="stylesheet" href="//cdn.staticfile.net/photoswipe/5.4.2/photoswipe.min.css"><script type="module" src="/blog/js/post/img-swipe.js"></script><script type="module" src="/blog/js/post/enable.js"></script><noscript><div class="noscript-warning">LNote works best with JavaScript enabled</div></noscript></body></html>